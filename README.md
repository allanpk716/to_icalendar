# to_icalendar

ä¸€ä¸ªé€šè¿‡CalDAVåè®®å‘é€æé†’äº‹é¡¹åˆ°iOSæé†’äº‹é¡¹çš„Goç¨‹åºã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ é€šè¿‡CalDAVåè®®ç›´æ¥åŒæ­¥åˆ°iOSæé†’äº‹é¡¹
- ğŸ”’ APPä¸“ç”¨å¯†ç å®‰å…¨åŠ å¯†å­˜å‚¨
- ğŸ“ JSONæ ¼å¼é…ç½®æé†’äº‹é¡¹
- â° æ”¯æŒè‡ªå®šä¹‰æé†’æ—¶é—´
- ğŸ“¦ æ”¯æŒæ‰¹é‡ä¸Šä¼ æé†’äº‹é¡¹
- ğŸ¯ æ”¯æŒè®¾ç½®ä¼˜å…ˆçº§å’Œåˆ†ç±»

## å®‰è£…

### ä»æºç ç¼–è¯‘

```bash
git clone https://github.com/allanpk716/to_icalendar.git
cd to_icalendar
go mod tidy
go build -o to_icalendar main.go
```

## ä½¿ç”¨æ–¹æ³•

### 1. åˆå§‹åŒ–é…ç½®

```bash
./to_icalendar init
```

è¿™å°†åˆ›å»ºé…ç½®æ–‡ä»¶æ¨¡æ¿ï¼š
- `config/server.yaml` - æœåŠ¡å™¨é…ç½®
- `config/reminder.json` - æé†’äº‹é¡¹æ¨¡æ¿

### 2. é…ç½®Apple ID

ç¼–è¾‘ `config/server.yaml`ï¼š

```yaml
caldav:
  server_url: "https://caldav.icloud.com"
  username: "your_apple_id@icloud.com"
  timezone: "Asia/Shanghai"
```

**é‡è¦**: æ‚¨éœ€è¦ç”ŸæˆApple IDçš„APPä¸“ç”¨å¯†ç ï¼š
1. è®¿é—® https://appleid.apple.com/
2. ç™»å½•æ‚¨çš„Apple ID
3. é€‰æ‹©"å®‰å…¨æ€§" â†’ "APPä¸“ç”¨å¯†ç "
4. ç”Ÿæˆæ–°çš„APPä¸“ç”¨å¯†ç 

### 3. åˆ›å»ºæé†’äº‹é¡¹

ç¼–è¾‘æé†’äº‹é¡¹JSONæ–‡ä»¶ï¼š

```json
{
  "title": "ä¼šè®®æé†’",
  "description": "å‚åŠ äº§å“è¯„å®¡ä¼šè®®",
  "date": "2024-12-25",
  "time": "14:30",
  "remind_before": "15m",
  "priority": "medium",
  "list": "å·¥ä½œ"
}
```

#### æ”¯æŒçš„å­—æ®µ

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `title` | string | âœ… | æé†’æ ‡é¢˜ |
| `description` | string | âŒ | è¯¦ç»†å¤‡æ³¨ |
| `date` | string | âœ… | æ—¥æœŸ (YYYY-MM-DD) |
| `time` | string | âœ… | æ—¶é—´ (HH:MM) |
| `remind_before` | string | âŒ | æå‰æé†’æ—¶é—´ (å¦‚: 15m, 1h, 1d) |
| `priority` | string | âŒ | ä¼˜å…ˆçº§: low/medium/high |
| `list` | string | âŒ | æé†’äº‹é¡¹åˆ—è¡¨åç§° |

### 4. ä¸Šä¼ æé†’äº‹é¡¹

```bash
# ä¸Šä¼ å•ä¸ªæé†’äº‹é¡¹
./to_icalendar upload config/reminder.json

# æ‰¹é‡ä¸Šä¼ æé†’äº‹é¡¹
./to_icalendar upload reminders/*.json
```

é¦–æ¬¡è¿è¡Œæ—¶ï¼Œç¨‹åºä¼šæç¤ºæ‚¨è¾“å…¥APPä¸“ç”¨å¯†ç ï¼Œå¹¶åŠ å¯†ä¿å­˜ä¾›åç»­ä½¿ç”¨ã€‚

### 5. å…¶ä»–å‘½ä»¤

```bash
# æµ‹è¯•CalDAVè¿æ¥
./to_icalendar test

# åˆ—å‡ºæ‰€æœ‰æé†’äº‹é¡¹
./to_icalendar list

# æ˜¾ç¤ºå¸®åŠ©
./to_icalendar help
```

## æé†’æ—¶é—´æ ¼å¼

`remind_before` å­—æ®µæ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š

- `15m` - æå‰15åˆ†é’Ÿ
- `1h` - æå‰1å°æ—¶
- `2d` - æå‰2å¤©
- `30m` - æå‰30åˆ†é’Ÿ

## ä¼˜å…ˆçº§è¯´æ˜

- `high` - é«˜ä¼˜å…ˆçº§ (iCalendarå€¼: 1)
- `medium` - ä¸­ç­‰ä¼˜å…ˆçº§ (iCalendarå€¼: 5) - é»˜è®¤
- `low` - ä½ä¼˜å…ˆçº§ (iCalendarå€¼: 9)

## å®‰å…¨æ€§

- APPä¸“ç”¨å¯†ç ä½¿ç”¨AES-256-GCMç®—æ³•åŠ å¯†å­˜å‚¨
- åŠ å¯†å¯†é’¥åŸºäºæœºå™¨ç¡¬ä»¶ç‰¹å¾ç”Ÿæˆ
- å¯†ç æ–‡ä»¶ä»…å½“å‰ç”¨æˆ·å¯è¯» (æƒé™: 0600)
- å†…å­˜ä¸­çš„æ•æ„Ÿæ•°æ®ä½¿ç”¨åç«‹å³æ¸…é›¶

## æ•…éšœæ’é™¤

### è¿æ¥å¤±è´¥

1. ç¡®è®¤Apple IDå’ŒAPPä¸“ç”¨å¯†ç æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. ç¡®è®¤å·²å¯ç”¨iCloudçš„æé†’äº‹é¡¹åŒæ­¥

### å¯†ç é—®é¢˜

å¦‚æœå¿˜è®°å¯†ç æˆ–éœ€è¦æ›´æ¢Apple IDï¼Œåˆ é™¤ `data/.encrypted_password` æ–‡ä»¶ï¼Œç¨‹åºä¼šåœ¨ä¸‹æ¬¡è¿è¡Œæ—¶é‡æ–°æç¤ºè¾“å…¥å¯†ç ã€‚

### æ—¶é—´é—®é¢˜

ç¡®ä¿ï¼š
1. æ—¥æœŸæ ¼å¼ä¸º `YYYY-MM-DD`
2. æ—¶é—´æ ¼å¼ä¸º `HH:MM` (24å°æ—¶åˆ¶)
3. æé†’æ—¶é—´åœ¨æœªæ¥

## ç¤ºä¾‹

### åˆ›å»ºå·¥ä½œä¼šè®®æé†’

```json
{
  "title": "å›¢é˜Ÿå‘¨ä¼š",
  "description": "è®¨è®ºæœ¬å‘¨å·¥ä½œè¿›å±•å’Œä¸‹å‘¨è®¡åˆ’",
  "date": "2024-12-25",
  "time": "09:30",
  "remind_before": "30m",
  "priority": "high",
  "list": "å·¥ä½œ"
}
```

### åˆ›å»ºä¸ªäººäº‹åŠ¡æé†’

```json
{
  "title": "ç¼´çº³æ°´ç”µè´¹",
  "description": "æœ¬æœˆæ°´ç”µè´¹è´¦å•",
  "date": "2024-12-28",
  "time": "18:00",
  "remind_before": "1h",
  "priority": "medium",
  "list": "ç”Ÿæ´»"
}
```

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼